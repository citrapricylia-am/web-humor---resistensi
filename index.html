<!DOCTYPE html>
<html lang="id" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analisis Interaktif: Komedi Sebagai Perlawanan di Indonesia</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Poppins:wght@600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FDFBF8;
            color: #38332E;
        }
        h1, h2, h3, h4 {
            font-family: 'Poppins', sans-serif;
        }
        .nav-link {
            transition: color 0.3s, border-bottom-color 0.3s;
            border-bottom: 2px solid transparent;
        }
        .nav-link.active, .nav-link:hover {
            color: #D97706;
            border-bottom-color: #D97706;
        }

        /* START: Flip Card Correction */
        .card-wrapper {
            perspective: 1000px;
            height: 100%;
        }
        .card {
            position: relative;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            transition: transform 0.6s;
            cursor: pointer;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .card.is-flipped {
            transform: rotateY(180deg);
        }
        .card-face, .card-back {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
            border-radius: 0.5rem;
        }
        .card-back {
            transform: rotateY(180deg);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            overflow-y: auto;
            padding: 1.5rem;
        }
        /* END: Flip Card Correction */
       
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
            height: 400px;
            max-height: 50vh;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 500px;
            }
        }
    </style>
</head>
<body class="bg-[#FDFBF8] text-stone-800">
   
<!-- Chosen Palette: Warm Earth Tones -->
<!-- Application Structure Plan: Saya merancang aplikasi ini sebagai sebuah narasi tunggal yang dapat digulir (single-page scrollable narrative) untuk memandu pengguna dari konsep umum ke studi kasus spesifik. Strukturnya adalah: 1) Pengantar Konseptual, 2) Studi Kasus Ikonik (Warkop DKI) dengan visualisasi data untuk menunjukkan konteks, 3) Eksplorasi Humor Keseharian (Kuliner) dalam bentuk galeri interaktif untuk mendorong penemuan, dan 4) Analisis Sintetis. Struktur ini dipilih karena paling efektif untuk menceritakan sebuah kisah budaya yang kompleks secara linear namun interaktif, memungkinkan pengguna memahami lapisan-lapisan makna tanpa kewalahan. Navigasi sticky memfasilitasi akses cepat ke setiap bagian tematik. -->
<!-- Visualization & Content Choices:
1. Info: Kritik sosial Warkop DKI selama era Orde Baru. Goal: Menunjukkan korelasi antara karya Warkop dan konteks politik. Viz/Presentation: Bar chart (Chart.js/Canvas) yang memetakan jumlah film Warkop per tahun di atas garis waktu peristiwa penting Orde Baru. Interaction: Tooltip pada bar chart akan menampilkan detail film dan kritik yang relevan. Justification: Visualisasi ini lebih berdampak daripada daftar teks, secara langsung mengaitkan output kreatif dengan tekanan politik.
2. Info: Nama-nama makanan Indonesia yang provokatif. Goal: Mengorganisir dan menampilkan berbagai contoh ekspresi folklor yang tersembunyi. Viz/Presentation: Galeri kartu interaktif (HTML/CSS/JS). Interaction: Mengklik kartu akan membaliknya ('flip') untuk menampilkan asal-usul, deskripsi, dan analisis budaya nama tersebut. Justification: Mendorong eksplorasi dan rasa ingin tahu pengguna dengan cara yang bersih dan terorganisir, lebih efektif daripada daftar panjang atau peta yang rumit untuk data kualitatif ini.
3. Info: Konsep teoritis dan analisis. Goal: Menyajikan argumen akademis. Viz/Presentation: Blok teks terstruktur dengan kutipan yang menonjol (HTML/Tailwind). Interaction: Navigasi internal via tautan. Justification: Memastikan keterbacaan dan fokus pada konten analitis yang padat. -->
<!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

    <header class="bg-white/80 backdrop-blur-md sticky top-0 z-50 shadow-sm">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <h1 class="text-xl font-bold text-amber-700">Humor & Resistensi</h1>
            <div class="hidden md:flex space-x-8">
                <a href="#pengantar" class="nav-link">Pengantar</a>
                <a href="#warkop" class="nav-link">Studi Kasus: Warkop DKI</a>
                <a href="#kuliner" class="nav-link">Folklore Kuliner</a>
                <a href="#analisis" class="nav-link">Analisis Budaya</a>
            </div>
            <div class="md:hidden">
                <select id="mobile-nav" class="bg-white border border-stone-300 rounded-md py-2 px-3 text-stone-700">
                    <option value="#pengantar">Pengantar</option>
                    <option value="#warkop">Studi Kasus: Warkop DKI</option>
                    <option value="#kuliner">Folklore Kuliner</option>
                    <option value="#analisis">Analisis Budaya</option>
                </select>
            </div>
        </nav>
    </header>

    <main class="container mx-auto px-6 py-12">
        <section id="pengantar" class="text-center mb-24">
            <h2 class="text-4xl font-bold text-amber-800 mb-4">Tawa Sebagai Senjata</h2>
            <p class="text-lg max-w-3xl mx-auto text-stone-600">
                Aplikasi ini menjelajahi bagaimana komedi dan humor berfungsi sebagai bentuk perlawanan simbolik dan katarsis sosial dalam masyarakat Indonesia. Dari satire politik yang tajam hingga lelucon sehari-hari yang subversif, kita akan menelusuri bagaimana tawa menjadi alat bagi rakyat untuk menavigasi, mengkritik, dan bertahan dalam menghadapi tekanan sosial dan politik. Ini adalah studi tentang ketangguhan budaya yang diekspresikan melalui humor.
            </p>
        </section>

        <section id="warkop" class="mb-24">
            <h2 class="text-3xl font-bold text-center mb-4 text-amber-800">Studi Kasus: Warkop DKI, Tawa di Bawah Tekanan Orde Baru</h2>
            <p class="text-base text-center max-w-4xl mx-auto text-stone-600 mb-10">
                Warkop DKI (Dono, Kasino, Indro) adalah fenomena budaya yang melampaui sekadar komedi. Di tengah represi era Orde Baru, mereka menjadi corong kritik sosial yang dibungkus dalam lawakan slapstick dan satire cerdas. Grafik di bawah ini memetakan produktivitas film mereka terhadap beberapa peristiwa penting, menunjukkan bagaimana mereka terus berkarya dan menyisipkan kritik di masa-masa paling menantang. Interaksilah dengan grafik untuk melihat detailnya.
            </p>
            <div class="bg-white p-4 sm:p-8 rounded-xl shadow-lg">
                <div class="chart-container">
                    <canvas id="warkopChart"></canvas>
                </div>
            </div>
        </section>

        <section id="kuliner" class="mb-24">
            <h2 class="text-3xl font-bold text-center mb-4 text-amber-800">Folklore Kuliner: Repositori Data Lapangan</h2>
            <p class="text-base text-center max-w-4xl mx-auto text-stone-600 mb-10">
                Bagian ini adalah repositori studi kasus kuliner yang dikumpulkan. Setiap kartu mewakili ekspresi folklor lokal dan analisis budaya yang menyertainya. Anda dapat menambahkan data lapangan baru secara manual melalui tombol di bawah.
            </p>
            <div id="food-gallery" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
            </div>
           
            <!-- Fitur Manual Input Repositori -->
            <div class="mt-12 text-center">
                <button id="add-food-btn" class="bg-amber-600 hover:bg-amber-700 text-white font-bold py-3 px-6 rounded-full transition shadow-md shadow-amber-300">
                    Tambahkan Data Studi Kasus Baru
                </button>
            </div>
        </section>

        <section id="analisis" class="bg-white p-8 rounded-xl shadow-lg">
            <h2 class="text-3xl font-bold text-center mb-8 text-amber-800">Analisis Budaya: Mengapa Humor Begitu Kuat?</h2>
           
            <!-- Gemini Feature 1: Pencarian Referensi Akademis Lanjutan (Tetap Aktif) -->
            <div class="mb-8 p-6 bg-amber-50 rounded-lg border border-amber-200">
                <h3 class="text-xl font-semibold mb-3 text-amber-800">Cari Referensi Akademis (Gemini)</h3>
                <p class="text-sm text-stone-600 mb-3">Masukkan konsep kunci penelitian (misalnya, *ritual komedi* atau *social safety valve*) untuk mendapatkan ringkasan dan sumber yang relevan dari sudut pandang antropologi/sosiologi.</p>
                <div class="flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-3">
                    <input type="text" id="ref-query" placeholder="Contoh: Ambiguity in Satire" class="flex-grow p-2 border border-stone-300 rounded-md focus:ring-amber-500 focus:border-amber-500">
                    <button id="search-ref-btn" class="bg-amber-700 hover:bg-amber-800 text-white font-bold py-2 px-4 rounded-md transition">
                        Cari
                    </button>
                </div>
                <div id="ref-loader" class="mt-3 text-amber-600 hidden">
                    <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-amber-600 inline-block" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                    Mencari dan mensintesis referensi...
                </div>
                <div id="ref-output" class="mt-4 border-t border-stone-200 pt-4 hidden">
                    <!-- Output goes here -->
                </div>
            </div>
           
            <div class="grid md:grid-cols-2 gap-8">
                <div>
                    <h3 class="text-xl font-semibold mb-3 text-amber-700">Katarsis dan Katup Pengaman</h3>
                    <p class="text-stone-600">Humor berfungsi sebagai katup pengaman sosial (social safety valve). Dalam masyarakat di mana kritik langsung berbahaya, lelucon menyediakan ruang aman untuk menyuarakan frustrasi dan kecemasan. Menertawakan figur otoritas atau kondisi yang menekan dapat mengurangi ketegangan psikologis secara kolektif, sebuah proses yang dikenal sebagai katarsis.</p>
                </div>
                <div>
                    <h3 class="text-xl font-semibold mb-3 text-amber-700">Subversi dan Ambiguitas</h3>
                    <p class="text-stone-600">Kekuatan utama humor sebagai perlawanan terletak pada ambiguitasnya. Sebuah lelucon satire selalu bisa disangkal sebagai "hanya bercanda", memberikan perlindungan bagi pelontarnya. Warkop DKI adalah master dalam hal ini, menyisipkan kritik tajam yang bisa mereka sangkal jika ditekan. Ambiguitas ini menciptakan ruang untuk subversi yang sulit diberantas.</p>
                </div>
                <div>
                    <h3 class="text-xl font-semibold mb-3 text-amber-700">Memperkuat Solidaritas</h3>
                    <p class="text-stone-600">Tertawa bersama atas lelucon yang 'orang dalam' saja yang mengerti (in-jokes) akan memperkuat ikatan komunitas. Ketika masyarakat menertawakan penderitaan atau ketidakadilan yang sama, mereka merasa tidak sendirian. Humor membangun solidaritas implisit, menegaskan identitas kolektif dalam menghadapi 'liyan' (the other), baik itu penguasa maupun norma sosial yang kaku.</p>
                </div>
                <div>
                    <h3 class="text-xl font-semibold mb-3 text-amber-700">Ketangguhan Budaya (Cultural Resilience)</h3>
                    <p class="text-stone-600">Kemampuan untuk menghasilkan humor di tengah kesulitan adalah cerminan ketangguhan budaya. Masyarakat Indonesia, dengan keragaman budayanya, telah lama menggunakan folklor, plesetan, dan guyonan sebagai cara untuk memproses dan bertahan dari berbagai zaman. Fenomena ini menunjukkan kapasitas adaptasi dan kreativitas yang luar biasa.</p>
                </div>
            </div>
        </section>
    </main>
   
    <!-- Modal Input Data Baru -->
    <div id="data-modal" class="fixed inset-0 bg-black/50 hidden items-center justify-center z-[100]">
        <div class="bg-white p-8 rounded-lg shadow-2xl w-full max-w-lg mx-4">
            <h3 class="text-2xl font-bold text-amber-800 mb-4">Input Data Folklor Baru</h3>
            <form id="new-food-form" class="space-y-4">
                <div>
                    <label for="input-name" class="block text-sm font-medium text-stone-700">Nama Makanan</label>
                    <input type="text" id="input-name" required class="mt-1 block w-full p-2 border border-stone-300 rounded-md">
                </div>
                <div>
                    <label for="input-origin" class="block text-sm font-medium text-stone-700">Asal Daerah</label>
                    <input type="text" id="input-origin" required class="mt-1 block w-full p-2 border border-stone-300 rounded-md">
                </div>
                <div>
                    <label for="input-desc" class="block text-sm font-medium text-stone-700">Deskripsi Singkat</label>
                    <textarea id="input-desc" rows="2" required class="mt-1 block w-full p-2 border border-stone-300 rounded-md"></textarea>
                </div>
                <div>
                    <label for="input-analysis" class="block text-sm font-medium text-stone-700">Analisis Antropologis/Budaya</label>
                    <textarea id="input-analysis" rows="3" required class="mt-1 block w-full p-2 border border-stone-300 rounded-md"></textarea>
                </div>
                <div class="flex justify-end space-x-3 pt-4">
                    <button type="button" id="close-modal-btn" class="px-4 py-2 text-stone-600 bg-stone-100 hover:bg-stone-200 rounded-md transition">Batal</button>
                    <button type="submit" class="px-4 py-2 bg-amber-600 text-white hover:bg-amber-700 rounded-md transition">Tambahkan ke Repositori</button>
                </div>
            </form>
        </div>
    </div>

    <footer class="text-center py-8 mt-12 border-t border-stone-200">
        <p class="text-stone-500">Dasbor Interaktif Penelitian Budaya | Dibuat untuk Tujuan Akademis</p>
    </footer>

    <script>
        const API_KEY = "";
        const API_URL_TEXT = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${API_KEY}`;
       
        // Fungsi untuk menunda eksekusi (untuk exponential backoff)
        const sleep = (ms) => new Promise(resolve => setTimeout(resolve, ms));

        // Fungsi untuk melakukan fetch dengan exponential backoff
        async function fetchWithRetry(url, options, maxRetries = 5) {
            for (let i = 0; i < maxRetries; i++) {
                try {
                    const response = await fetch(url, options);
                    if (response.status === 429 && i < maxRetries - 1) {
                        const delay = Math.pow(2, i) * 1000 + Math.random() * 1000;
                        await sleep(delay);
                        continue;
                    }
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    return response;
                } catch (error) {
                    if (i === maxRetries - 1) throw error;
                    const delay = Math.pow(2, i) * 1000 + Math.random() * 1000;
                    await sleep(delay);
                }
            }
        }
       
        // FUNGSI UTAMA UNTUK FITUR GEMINI (PENCARIAN REFERENSI TETAP)
       
        async function searchAcademicReferences() {
            const queryInput = document.getElementById('ref-query');
            const outputDiv = document.getElementById('ref-output');
            const loaderDiv = document.getElementById('ref-loader');
            const searchBtn = document.getElementById('search-ref-btn');
            const userQuery = queryInput.value.trim();

            if (!userQuery) return;

            outputDiv.innerHTML = '';
            outputDiv.classList.add('hidden');
            loaderDiv.classList.remove('hidden');
            searchBtn.disabled = true;

            const systemPrompt = `Anda adalah pustakawan dan antropolog ahli. Berikan ringkasan singkat dalam satu paragraf (maksimal 100 kata) tentang relevansi konsep antropologi atau sosiologi berikut terhadap studi komedi dan perlawanan rakyat. Sertakan nama penulis atau teori kunci. Jawab dalam bahasa Indonesia.`;
           
            const payload = {
                contents: [{ parts: [{ text: `Tolong jelaskan konsep: "${userQuery}"` }] }],
                tools: [{ "google_search": {} }],
                systemInstruction: { parts: [{ text: systemPrompt }] },
            };
           
            try {
                const response = await fetchWithRetry(API_URL_TEXT, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
               
                const result = await response.json();
                const candidate = result.candidates?.[0];
               
                if (candidate && candidate.content?.parts?.[0]?.text) {
                    const text = candidate.content.parts[0].text;
                    let sources = [];
                    const groundingMetadata = candidate.groundingMetadata;

                    if (groundingMetadata && groundingMetadata.groundingAttributions) {
                        sources = groundingMetadata.groundingAttributions
                            .map(attribution => ({
                                uri: attribution.web?.uri,
                                title: attribution.web?.title,
                            }))
                            .filter(source => source.uri && source.title);
                    }

                    let outputHTML = `<div class="p-4 bg-white rounded-md shadow-inner">
                        <h4 class="font-bold text-amber-700 mb-2">Konsep: ${userQuery}</h4>
                        <p class="text-sm text-stone-700">${text}</p>
                    </div>`;

                    if (sources.length > 0) {
                        outputHTML += `<div class="mt-3">
                            <h5 class="text-sm font-semibold text-stone-600">Sumber Relevan:</h5>
                            <ul class="list-disc list-inside text-xs text-stone-500 mt-1 space-y-1">`;
                        sources.slice(0, 3).forEach(s => {
                            outputHTML += `<li><a href="${s.uri}" target="_blank" class="hover:text-amber-600">${s.title}</a></li>`;
                        });
                        outputHTML += `</ul></div>`;
                    } else {
                        outputHTML += `<p class="text-xs text-stone-400 mt-2">Tidak ada sumber spesifik yang ditemukan.</p>`;
                    }

                    outputDiv.innerHTML = outputHTML;
                    outputDiv.classList.remove('hidden');
                } else {
                    outputDiv.innerHTML = '<p class="text-red-500">Gagal mendapatkan ringkasan referensi. Coba konsep lain.</p>';
                    outputDiv.classList.remove('hidden');
                }

            } catch (error) {
                console.error("Gemini API Error:", error);
                outputDiv.innerHTML = '<p class="text-red-500">Terjadi kesalahan jaringan saat mencari referensi.</p>';
                outputDiv.classList.remove('hidden');
            } finally {
                loaderDiv.classList.add('hidden');
                searchBtn.disabled = false;
            }
        }
       
        // FUNGSI UTAMA UNTUK FITUR REPOSITORI MANUAL
       
        const foodData = [
            {
                name: "Kontol Kejepit",
                origin: "Bantul, Yogyakarta",
                image: "https://placehold.co/600x400/F59E0B/333?text=Kue+Jepit+Kacang+Hijau",
                description: "Kue tradisional berwarna coklat muda dengan isian kacang hijau atau enten-enten kelapa. Namanya berasal dari bentuknya yang mirip alat kelamin pria ('kontol') yang seolah 'kejepit' saat proses pembuatannya.",
                analysis: "Penamaan ini adalah bentuk 'guyon maton' (candaan sopan) khas Jawa. Dengan menamai sesuatu yang sakral (makanan) dengan nama vulgar, terjadi pelepasan ketegangan terhadap norma kesopanan yang kaku."
            },
            {
                name: "Kue Memek",
                origin: "Simeulue, Aceh",
                image: "https://placehold.co/600x400/D97706/333?text=Bubur+Ketan+Pisang",
                description: "Bubur atau penganan yang terbuat dari beras ketan, pisang, dan santan. Nama 'memek' berasal dari kata 'mamemek' dalam bahasa setempat yang artinya mengunyah atau menggigit. Telah diakui sebagai Warisan Budaya Takbenda.",
                analysis: "Contoh bagaimana sebuah kata bisa memiliki makna berbeda tergantung konteks budaya. Meskipun terdengar tabu di luar Simeulue, nama ini adalah deskripsi proses dan bagian dari identitas lokal yang otentik."
            },
            {
                name: "Cendol Jembut",
                origin: "Purworejo, Jawa Tengah",
                image: "https://placehold.co/600x400/B45309/333?text=Dawet+Hitam+Purworejo",
                description: "Es cendol dawet hitam yang dijual di bawah jembatan butuh ('Jembut'). Awalnya hanya dikenal sebagai Dawet Ireng, nama 'Jembut' menjadi populer sebagai akronim lokasi yang jenaka dan mudah diingat.",
                analysis: "Ini adalah contoh kreativitas linguistik dan 'branding' akar rumput. Akronim yang provokatif membuat produk ini menonjol dan menjadi legenda lokal, menunjukkan kekuatan humor dalam pemasaran informal."
            },
            {
                name: "Peler Kambing",
                origin: "Bali",
                image: "https://placehold.co/600x400/92400E/333?text=Jajanan+Singkong+Gula+Merah",
                description: "Jajanan pasar dari singkong parut yang dicampur gula merah, dibentuk lonjong, lalu direbus. Nama ini merujuk pada bentuknya yang dianggap mirip testis kambing.",
                analysis: "Sama seperti Kontol Kejepit, penamaan ini menggunakan analogi visual yang vulgar untuk menciptakan humor. Ini adalah cara masyarakat 'menjinakkan' hal-hal tabu dengan membawanya ke ranah sehari-hari seperti makanan."
            },
            {
                name: "Nasi Kentut",
                origin: "Medan, Sumatera Utara",
                image: "https://placehold.co/600x400/78350F/333?text=Nasi+Daun+Sembukan",
                description: "Nasi yang dimasak dengan daun sembukan (Paederia foetida), yang memiliki aroma khas seperti kentut saat diremas. Daun ini dipercaya memiliki khasiat untuk melancarkan pencernaan.",
                analysis: "Di sini, nama yang tidak biasa justru berfungsi sebagai penanda khasiat dan keunikan bahan. Humor muncul dari kejujuran deskriptif yang melawan citra ideal makanan yang seharusnya selalu 'harum' dan 'sedap'."
            },
             {
                name: "Kue Tete",
                origin: "Jakarta (Betawi)",
                image: "https://placehold.co/600x400/CA8A04/333?text=Kue+Ape+Betawi",
                description: "Kue Ape atau 'kue tete' adalah jajanan khas Betawi yang berbentuk lingkaran dengan bagian tengah yang menonjol dan lembut, dikelilingi oleh pinggiran yang renyah. Bentuknya yang dianggap menyerupai payudara ('tete') membuatnya mendapat julukan tersebut.",
                analysis: "Penamaan ini adalah cerminan dari humor urban Betawi yang ceplas-ceplos dan berbasis pada analogi visual. Ini menunjukkan bagaimana kehidupan kota yang dinamis juga menghasilkan folklornya sendiri yang unik dan sedikit nakal."
            }
        ];

        function createFoodCardHTML(food) {
            const isNew = food.isNew ? ' (Data Manual)' : '';
            const imagePlaceholder = food.image || `https://placehold.co/600x400/3B82F6/EEE?text=${food.name.replace(/ /g, '+')}`; // Placeholder biru untuk data baru
           
            return `
                <div class="card-wrapper h-80">
                    <div class="card w-full h-full">
                        <div class="card-face relative w-full h-full overflow-hidden">
                            <img src="${imagePlaceholder}" alt="${food.name}" class="w-full h-full object-cover rounded-lg">
                            <div class="absolute bottom-0 left-0 w-full p-4 bg-gradient-to-t from-black/70 to-transparent rounded-b-lg">
                                <h3 class="text-white text-2xl font-bold">${food.name}${isNew}</h3>
                                <p class="text-amber-200 text-sm">${food.origin}</p>
                            </div>
                        </div>
                        <div class="card-back absolute w-full h-full bg-white flex flex-col justify-between rounded-lg">
                            <div class="p-6 overflow-y-auto flex-grow">
                                <h4 class="font-bold text-lg text-amber-800">${food.name}</h4>
                                <p class="text-sm text-stone-600 mt-2">${food.description}</p>
                                <p class="text-sm text-stone-700 mt-4 italic border-l-4 border-amber-500 pl-3"><strong>Analisis:</strong> ${food.analysis}</p>
                            </div>
                            <p class="text-xs text-center text-stone-400 p-2 border-t">Klik untuk kembali</p>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderFoodCards(data) {
            const gallery = document.getElementById('food-gallery');
            // Clear existing content and render all data
            gallery.innerHTML = '';
            data.forEach(food => {
                gallery.innerHTML += createFoodCardHTML(food);
            });

            document.querySelectorAll('.card').forEach(card => {
                card.addEventListener('click', function() {
                    this.classList.toggle('is-flipped');
                });
            });
        }
       
        function addNewFoodCase(event) {
            event.preventDefault();

            const newFood = {
                name: document.getElementById('input-name').value,
                origin: document.getElementById('input-origin').value,
                description: document.getElementById('input-desc').value,
                analysis: document.getElementById('input-analysis').value,
                isNew: true, // Marker bahwa data ini diinput manual
                image: `https://placehold.co/600x400/3B82F6/EEE?text=${document.getElementById('input-name').value.replace(/ /g, '+')}` // Placeholder biru
            };
           
            foodData.push(newFood);
            renderFoodCards(foodData); // Re-render seluruh galeri
           
            // Close modal and reset form
            document.getElementById('data-modal').classList.add('hidden');
            document.getElementById('data-modal').classList.remove('flex');
            document.getElementById('new-food-form').reset();
        }

        function generateWordCloud(data) {
            const wordFrequencies = {};
            const container = document.getElementById('word-cloud-container');
            container.innerHTML = '';
            
            let allText = '';
            data.forEach(item => {
                // Ambil kata dari Nama dan Analisis
                allText += (item.name + ' ' + item.analysis).toLowerCase();
            });

            // Pemisahan kata (tokenization)
            const words = allText.match(/\b\w{3,}\b/g) || [];

            // Hitung frekuensi
            words.forEach(word => {
                if (!stopWords.has(word)) {
                    wordFrequencies[word] = (wordFrequencies[word] || 0) + 1;
                }
            });

            // Buat Word Cloud
            const wordCloud = new WordCloud(container, {
                list: Object.entries(wordFrequencies),
                gridSize: Math.round(16 * container.offsetWidth / 1024),
                weightFactor: 1,
                fontFamily: 'Inter',
                color: 'random-dark',
                backgroundColor: '#FDFBF8',
                rotateRatio: 0.3,
                rotationSteps: 2,
                drawOutOfBound: false,
                shuffle: true,
                shape: 'circle',
                ellipticity: 0.65,
                minRotation: -0.25,
                maxRotation: 0.25,
                minSize: 10,
                maxSize: 100,
                minWeight: 1,
                maxWeight: 10,
                clearCanvas: true,
                hover: function(item, dimension, event) {
                    container.style.cursor = 'pointer';
                },
                click: function(item, dimension, event) {
                    console.log(item);
                },
                onWordCloudRendered: function() {
                    container.style.cursor = 'default';
                }
            });
        }


        document.addEventListener('DOMContentLoaded', () => {
            // Data Warkop Chart
            const warkopData = {
                labels: ['1979-80', '1981-82', '1983-84', '1985-86', '1987-88', '1989-90', '1991-92', '1993-94'],
                datasets: [{
                    label: 'Jumlah Film Warkop DKI Dirilis',
                    data: [2, 4, 5, 4, 4, 5, 4, 3],
                    backgroundColor: 'rgba(217, 119, 6, 0.7)',
                    borderColor: 'rgba(180, 83, 9, 1)',
                    borderWidth: 1,
                    hoverBackgroundColor: 'rgba(180, 83, 9, 1)',
                }]
            };

            const warkopEvents = {
                '1981-82': 'Peristiwa: Penembakan Misterius (Petrus) dimulai.',
                '1987-88': 'Konteks: Kritik terhadap monopoli dan korupsi meningkat.',
                '1991-92': 'Konteks: Isu suksesi kepemimpinan mulai menguat.',
                '1993-94': 'Peristiwa: Pembredelan majalah Tempo, Editor, dan DeTik.'
            };

            const warkopChartCtx = document.getElementById('warkopChart').getContext('2d');
            new Chart(warkopChartCtx, {
                type: 'bar',
                data: warkopData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Produktivitas Film Warkop DKI Selama Era Orde Baru',
                            font: { size: 16, family: 'Poppins' }
                        },
                        tooltip: {
                            callbacks: {
                                afterLabel: function(context) {
                                    const year = context.label;
                                    return warkopEvents[year] || 'Era puncak kreativitas Warkop.';
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: { display: true, text: 'Jumlah Film' }
                        },
                        x: {
                            title: { display: true, text: 'Periode Tahun' }
                        }
                    }
                }
            });

            // Initial render of food cards
            renderFoodCards(foodData);
           
            // Event Listeners for Gemini Feature (Pencarian Referensi)
            document.getElementById('search-ref-btn').addEventListener('click', searchAcademicReferences);
            document.getElementById('ref-query').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') searchAcademicReferences();
            });

            // Event Listeners for Manual Input Feature
            const modal = document.getElementById('data-modal');
           
            document.getElementById('add-food-btn').addEventListener('click', () => {
                modal.classList.remove('hidden');
                modal.classList.add('flex');
            });
           
            document.getElementById('close-modal-btn').addEventListener('click', () => {
                modal.classList.add('hidden');
                modal.classList.remove('flex');
            });

            document.getElementById('new-food-form').addEventListener('submit', addNewFoodCase);


            // Standard Nav Logic
            const navLinks = document.querySelectorAll('.nav-link');
            const sections = document.querySelectorAll('section');

            function changeNav() {
                let index = sections.length;
                while(--index && window.scrollY + 100 < sections[index].offsetTop) {}
               
                navLinks.forEach((link) => link.classList.remove('active'));
                const activeLink = document.querySelector(`.nav-link[href="#${sections[index].id}"]`);
                if (activeLink) {
                    activeLink.classList.add('active');
                }
            }
            changeNav();
            window.addEventListener('scroll', changeNav);

            const mobileNav = document.getElementById('mobile-nav');
            mobileNav.addEventListener('change', () => {
                const targetId = mobileNav.value;
                const targetElement = document.querySelector(targetId);
                if (targetElement) {
                    targetElement.scrollIntoView({ behavior: 'smooth' });
                }
            });

        });
    </script>
</body>
</html>
}
